-- ============================================================
-- PULSE — 경영한눈 : Seed Data
-- ============================================================

-- ── Users (insert without team_id first) ────────────────
insert into users (id, name, email, role, created_at) values
  ('a0000000-0000-0000-0000-000000000001', '이대표',  'ceo@pulse.co',   'executive', '2025-01-01T00:00:00Z'),
  ('a0000000-0000-0000-0000-000000000002', '김개발',  'kim@pulse.co',   'lead',      '2025-01-01T00:00:00Z'),
  ('a0000000-0000-0000-0000-000000000003', '박마케팅', 'park@pulse.co',  'lead',      '2025-01-01T00:00:00Z'),
  ('a0000000-0000-0000-0000-000000000004', '정운영',  'jung@pulse.co',  'lead',      '2025-01-01T00:00:00Z'),
  ('a0000000-0000-0000-0000-000000000005', '최디자인', 'choi@pulse.co',  'lead',      '2025-01-01T00:00:00Z'),
  ('a0000000-0000-0000-0000-000000000006', '한세일즈', 'han@pulse.co',   'lead',      '2025-01-01T00:00:00Z'),
  ('a0000000-0000-0000-0000-000000000007', '윤재무',  'yoon@pulse.co',  'lead',      '2025-01-01T00:00:00Z'),
  ('a0000000-0000-0000-0000-000000000008', '송관리',  'song@pulse.co',  'admin',     '2025-01-01T00:00:00Z');

-- ── Teams ───────────────────────────────────────────────
insert into teams (id, name, owner_user_id, member_count, sort_order, is_active) values
  ('b0000000-0000-0000-0000-000000000001', '개발팀',    'a0000000-0000-0000-0000-000000000002', 8, 1, true),
  ('b0000000-0000-0000-0000-000000000002', '마케팅팀',  'a0000000-0000-0000-0000-000000000003', 5, 2, true),
  ('b0000000-0000-0000-0000-000000000003', '운영팀',    'a0000000-0000-0000-0000-000000000004', 6, 3, true),
  ('b0000000-0000-0000-0000-000000000004', '디자인팀',  'a0000000-0000-0000-0000-000000000005', 4, 4, true),
  ('b0000000-0000-0000-0000-000000000005', '세일즈팀',  'a0000000-0000-0000-0000-000000000006', 7, 5, true),
  ('b0000000-0000-0000-0000-000000000006', '재무팀',    'a0000000-0000-0000-0000-000000000007', 3, 6, true);

-- ── Update users with team_id ───────────────────────────
update users set team_id = 'b0000000-0000-0000-0000-000000000001' where id = 'a0000000-0000-0000-0000-000000000002';
update users set team_id = 'b0000000-0000-0000-0000-000000000002' where id = 'a0000000-0000-0000-0000-000000000003';
update users set team_id = 'b0000000-0000-0000-0000-000000000003' where id = 'a0000000-0000-0000-0000-000000000004';
update users set team_id = 'b0000000-0000-0000-0000-000000000004' where id = 'a0000000-0000-0000-0000-000000000005';
update users set team_id = 'b0000000-0000-0000-0000-000000000005' where id = 'a0000000-0000-0000-0000-000000000006';
update users set team_id = 'b0000000-0000-0000-0000-000000000006' where id = 'a0000000-0000-0000-0000-000000000007';

-- ── Weekly Reports ──────────────────────────────────────
-- 개발팀
insert into weekly_reports (id, team_id, week_start_date, status, headline, anomalies, next_action, exec_decision_needed, decision_reason, option_a, option_b, due_date, risk_tags, links, created_at, created_by) values
  ('c0000000-0000-0000-0000-000000000001', 'b0000000-0000-0000-0000-000000000001', '2026-02-02', 'red',    '서버 장애 대응 중, 마이그레이션 지연', '{"고객 클레임 3건 접수 (응답속도 저하)","DB P95 응답시간 3.2초 초과"}', '핫픽스 배포 후 부하테스트 진행', true, '서버 증설 방식 결정 필요 (비용 영향 큼)', 'AWS 클라우드 증설 (월 200만)', '온프레미스 이관 (초기 500만)', '2026-02-10', '{"일정","품질","비용"}', '{}', '2026-02-03T09:30:00Z', 'a0000000-0000-0000-0000-000000000002'),
  ('c0000000-0000-0000-0000-000000000002', 'b0000000-0000-0000-0000-000000000001', '2026-01-26', 'yellow', 'DB 마이그레이션 착수, 일정 지연 위험', '{"DBA 퇴사로 인력 부족"}', '외부 DBA 컨설팅 검토', false, null, null, null, null, '{"일정","인력"}', '{}', '2026-01-27T10:00:00Z', 'a0000000-0000-0000-0000-000000000002'),
  ('c0000000-0000-0000-0000-000000000003', 'b0000000-0000-0000-0000-000000000001', '2026-01-19', 'green',  '스프린트 12 목표 100% 달성', '{}', 'DB 마이그레이션 계획 수립', false, null, null, null, null, '{}', '{}', '2026-01-20T09:00:00Z', 'a0000000-0000-0000-0000-000000000002'),
  ('c0000000-0000-0000-0000-000000000004', 'b0000000-0000-0000-0000-000000000001', '2026-01-12', 'green',  '신규 API v2 개발 완료, QA 진행 중', '{}', 'API v2 스테이징 배포', false, null, null, null, null, '{}', '{}', '2026-01-13T09:00:00Z', 'a0000000-0000-0000-0000-000000000002');

-- 마케팅팀
insert into weekly_reports (id, team_id, week_start_date, status, headline, anomalies, next_action, exec_decision_needed, decision_reason, option_a, option_b, due_date, risk_tags, links, created_at, created_by) values
  ('c0000000-0000-0000-0000-000000000005', 'b0000000-0000-0000-0000-000000000002', '2026-02-02', 'yellow', '2월 캠페인 집행 중, CPA 20% 초과', '{"페이스북 광고 CPA 목표 대비 20% 초과"}', '광고 소재 A/B 테스트 결과 리뷰', true, '마케팅 예산 재배분 필요', '페이스북 예산 삭감, 구글 이전', '현행 유지 후 2주 관찰', '2026-02-12', '{"비용"}', '{}', '2026-02-03T10:00:00Z', 'a0000000-0000-0000-0000-000000000003'),
  ('c0000000-0000-0000-0000-000000000006', 'b0000000-0000-0000-0000-000000000002', '2026-01-26', 'yellow', '캠페인 소재 제작 완료, 예산 검토 중', '{"예산 승인 지연 (재무팀 확인 대기)"}', '예산 확정 후 캠페인 론칭', false, null, null, null, null, '{"비용"}', '{}', '2026-01-27T10:00:00Z', 'a0000000-0000-0000-0000-000000000003'),
  ('c0000000-0000-0000-0000-000000000007', 'b0000000-0000-0000-0000-000000000002', '2026-01-19', 'yellow', '2월 캠페인 기획 완료', '{}', '소재 디자인 의뢰', false, null, null, null, null, '{}', '{}', '2026-01-20T10:00:00Z', 'a0000000-0000-0000-0000-000000000003'),
  ('c0000000-0000-0000-0000-000000000008', 'b0000000-0000-0000-0000-000000000002', '2026-01-12', 'yellow', '1월 캠페인 성과 분석 중', '{}', '2월 캠페인 전략 수립', false, null, null, null, null, '{}', '{}', '2026-01-13T10:00:00Z', 'a0000000-0000-0000-0000-000000000003');

-- 운영팀
insert into weekly_reports (id, team_id, week_start_date, status, headline, anomalies, next_action, exec_decision_needed, decision_reason, option_a, option_b, due_date, risk_tags, links, created_at, created_by) values
  ('c0000000-0000-0000-0000-000000000009', 'b0000000-0000-0000-0000-000000000003', '2026-02-02', 'red',   '핵심 인력 퇴사, 업무 공백 발생', '{"시니어 운영매니저 퇴사 (2/14 마지막 근무)"}', '긴급 채용 공고 게시 및 업무 인수인계', true, '인력 충원 방식 결정 필요', '외주 인력 투입 (즉시 가능)', '내부 정규직 채용 (3~4주 소요)', '2026-02-14', '{"인력"}', '{}', '2026-02-03T09:00:00Z', 'a0000000-0000-0000-0000-000000000004'),
  ('c0000000-0000-0000-0000-000000000010', 'b0000000-0000-0000-0000-000000000003', '2026-01-26', 'green', 'CS 응답시간 평균 2시간 이내 달성', '{}', 'CS 자동화 챗봇 도입 검토', false, null, null, null, null, '{}', '{}', '2026-01-27T09:00:00Z', 'a0000000-0000-0000-0000-000000000004'),
  ('c0000000-0000-0000-0000-000000000011', 'b0000000-0000-0000-0000-000000000003', '2026-01-19', 'green', '운영 매뉴얼 v2 배포 완료', '{}', '신규 입사자 온보딩 프로세스 적용', false, null, null, null, null, '{}', '{}', '2026-01-20T09:00:00Z', 'a0000000-0000-0000-0000-000000000004');

-- 디자인팀
insert into weekly_reports (id, team_id, week_start_date, status, headline, anomalies, next_action, exec_decision_needed, risk_tags, links, created_at, created_by) values
  ('c0000000-0000-0000-0000-000000000012', 'b0000000-0000-0000-0000-000000000004', '2026-02-02', 'green', '대시보드 리디자인 1차 시안 완성', '{}', '이해관계자 피드백 수집 후 2차 수정', false, '{}', '{}', '2026-02-03T11:00:00Z', 'a0000000-0000-0000-0000-000000000005'),
  ('c0000000-0000-0000-0000-000000000013', 'b0000000-0000-0000-0000-000000000004', '2026-01-26', 'green', '디자인 시스템 컴포넌트 20개 추가', '{}', '대시보드 리디자인 착수', false, '{}', '{}', '2026-01-27T11:00:00Z', 'a0000000-0000-0000-0000-000000000005'),
  ('c0000000-0000-0000-0000-000000000014', 'b0000000-0000-0000-0000-000000000004', '2026-01-19', 'green', '모바일 앱 UX 감사 완료', '{}', '디자인 시스템 업데이트', false, '{}', '{}', '2026-01-20T11:00:00Z', 'a0000000-0000-0000-0000-000000000005'),
  ('c0000000-0000-0000-0000-000000000015', 'b0000000-0000-0000-0000-000000000004', '2026-01-12', 'green', '브랜드 가이드라인 v3 확정', '{}', '모바일 앱 UX 감사 시작', false, '{}', '{}', '2026-01-13T11:00:00Z', 'a0000000-0000-0000-0000-000000000005');

-- 세일즈팀
insert into weekly_reports (id, team_id, week_start_date, status, headline, anomalies, next_action, exec_decision_needed, risk_tags, links, created_at, created_by) values
  ('c0000000-0000-0000-0000-000000000016', 'b0000000-0000-0000-0000-000000000005', '2026-02-02', 'green', '1월 매출 목표 112% 달성', '{"대형 거래처 A사 계약 갱신 지연 (협상 중)"}', 'A사 미팅 진행 후 조건 협의', false, '{"고객"}', '{}', '2026-02-03T10:30:00Z', 'a0000000-0000-0000-0000-000000000006'),
  ('c0000000-0000-0000-0000-000000000017', 'b0000000-0000-0000-0000-000000000005', '2026-01-26', 'green', '신규 리드 45건 확보, 파이프라인 확장', '{}', '2월 매출 목표 수립', false, '{}', '{}', '2026-01-27T10:30:00Z', 'a0000000-0000-0000-0000-000000000006'),
  ('c0000000-0000-0000-0000-000000000018', 'b0000000-0000-0000-0000-000000000005', '2026-01-19', 'green', '엔터프라이즈 영업 전략 수립 완료', '{}', '타겟 기업 리스트 확정', false, '{}', '{}', '2026-01-20T10:30:00Z', 'a0000000-0000-0000-0000-000000000006');

-- 재무팀 (업데이트 누락 시나리오)
insert into weekly_reports (id, team_id, week_start_date, status, headline, anomalies, next_action, exec_decision_needed, risk_tags, links, created_at, created_by) values
  ('c0000000-0000-0000-0000-000000000019', 'b0000000-0000-0000-0000-000000000006', '2026-01-19', 'green', '1월 결산 완료, 이상 없음', '{}', '2월 예산 편성', false, '{}', '{}', '2026-01-20T14:00:00Z', 'a0000000-0000-0000-0000-000000000007');

-- ── Issues ──────────────────────────────────────────────
insert into issues (id, team_id, title, description, impact, state, owner_user_id, due_date, created_at) values
  ('d0000000-0000-0000-0000-000000000001', 'b0000000-0000-0000-0000-000000000001', 'DB P95 응답시간 3초 초과', '마이그레이션 이후 DB 응답시간이 급격히 증가. P95 기준 3.2초로 SLA 위반 위험.', 'high', 'in_progress', 'a0000000-0000-0000-0000-000000000002', '2026-02-10', '2026-02-01T10:00:00Z'),
  ('d0000000-0000-0000-0000-000000000002', 'b0000000-0000-0000-0000-000000000001', '고객 클레임 3건 접수', null, 'high', 'open', 'a0000000-0000-0000-0000-000000000002', '2026-02-07', '2026-02-03T08:00:00Z'),
  ('d0000000-0000-0000-0000-000000000003', 'b0000000-0000-0000-0000-000000000003', '시니어 운영매니저 퇴사', '2/14 마지막 근무. 핵심 업무 인수인계 필요.', 'high', 'in_progress', 'a0000000-0000-0000-0000-000000000004', '2026-02-14', '2026-02-02T09:00:00Z'),
  ('d0000000-0000-0000-0000-000000000004', 'b0000000-0000-0000-0000-000000000002', '페이스북 광고 CPA 초과', '목표 대비 20% 초과. 소재 최적화 필요.', 'medium', 'in_progress', 'a0000000-0000-0000-0000-000000000003', '2026-02-12', '2026-02-01T11:00:00Z'),
  ('d0000000-0000-0000-0000-000000000005', 'b0000000-0000-0000-0000-000000000005', 'A사 계약 갱신 지연', '대형 거래처 A사 계약 조건 재협상 중.', 'medium', 'open', 'a0000000-0000-0000-0000-000000000006', '2026-02-15', '2026-02-03T10:00:00Z');

-- ── Action Items ────────────────────────────────────────
insert into action_items (id, team_id, report_id, title, owner_user_id, due_date, done_at, created_at) values
  ('e0000000-0000-0000-0000-000000000001', 'b0000000-0000-0000-0000-000000000001', 'c0000000-0000-0000-0000-000000000001', '핫픽스 v1.2.3 배포', 'a0000000-0000-0000-0000-000000000002', '2026-02-05', '2026-02-04T18:00:00Z', '2026-02-03T09:30:00Z'),
  ('e0000000-0000-0000-0000-000000000002', 'b0000000-0000-0000-0000-000000000001', 'c0000000-0000-0000-0000-000000000001', '부하테스트 실행 및 결과 보고', 'a0000000-0000-0000-0000-000000000002', '2026-02-08', null, '2026-02-03T09:30:00Z'),
  ('e0000000-0000-0000-0000-000000000003', 'b0000000-0000-0000-0000-000000000003', 'c0000000-0000-0000-0000-000000000009', '채용 공고 게시 (사람인, 원티드)', 'a0000000-0000-0000-0000-000000000004', '2026-02-05', '2026-02-04T10:00:00Z', '2026-02-03T09:00:00Z'),
  ('e0000000-0000-0000-0000-000000000004', 'b0000000-0000-0000-0000-000000000003', 'c0000000-0000-0000-0000-000000000009', '업무 인수인계 문서 작성', 'a0000000-0000-0000-0000-000000000004', '2026-02-12', null, '2026-02-03T09:00:00Z'),
  ('e0000000-0000-0000-0000-000000000005', 'b0000000-0000-0000-0000-000000000002', 'c0000000-0000-0000-0000-000000000005', '광고 소재 A/B 테스트 결과 분석', 'a0000000-0000-0000-0000-000000000003', '2026-02-07', null, '2026-02-03T10:00:00Z'),
  ('e0000000-0000-0000-0000-000000000006', 'b0000000-0000-0000-0000-000000000005', 'c0000000-0000-0000-0000-000000000016', 'A사 미팅 일정 조율', 'a0000000-0000-0000-0000-000000000006', '2026-02-07', '2026-02-05T14:00:00Z', '2026-02-03T10:30:00Z');

-- ── Decision Logs ───────────────────────────────────────
insert into decision_logs (id, team_id, report_id, title, context, option_a, option_b, recommendation, state, created_at) values
  ('f0000000-0000-0000-0000-000000000001', 'b0000000-0000-0000-0000-000000000001', 'c0000000-0000-0000-0000-000000000001', '서버 증설 방식 결정', 'DB 응답속도 저하로 서비스 품질 하락. 서버 증설이 시급하나 방식에 따라 비용 차이 큼.', 'AWS 클라우드 증설 (월 200만)', '온프레미스 이관 (초기 500만)', 'A안 추천 — 속도 우선, 즉시 적용 가능', 'pending', '2026-02-03T09:30:00Z'),
  ('f0000000-0000-0000-0000-000000000002', 'b0000000-0000-0000-0000-000000000002', 'c0000000-0000-0000-0000-000000000005', '마케팅 예산 재배분', '페이스북 CPA 초과로 예산 효율성 저하.', '페이스북 예산 삭감, 구글 이전', '현행 유지 후 2주 관찰', 'B안 추천 — 데이터 충분히 모은 후 판단', 'pending', '2026-02-03T10:00:00Z'),
  ('f0000000-0000-0000-0000-000000000003', 'b0000000-0000-0000-0000-000000000003', 'c0000000-0000-0000-0000-000000000009', '운영팀 인력 충원 방식', '시니어 운영매니저 퇴사로 업무 공백 발생 예상.', '외주 인력 투입 (즉시 가능)', '내부 정규직 채용 (3~4주 소요)', 'A안 단기 + B안 병행 추천', 'pending', '2026-02-03T09:00:00Z');

insert into decision_logs (id, team_id, title, context, option_a, option_b, decision, decided_by, decided_at, comment, followup_date, state, created_at) values
  ('f0000000-0000-0000-0000-000000000004', 'b0000000-0000-0000-0000-000000000001', '외부 DBA 컨설팅 도입', 'DBA 퇴사 후 DB 마이그레이션 지연 리스크.', '프리랜서 DBA 3개월 계약', '내부 개발자 교육 후 자체 해결', 'A안 — 프리랜서 DBA 계약 진행', 'a0000000-0000-0000-0000-000000000001', '2026-01-28T15:00:00Z', '속도가 중요하므로 프리랜서 우선 투입. 병행하여 내부 교육도 진행.', '2026-02-15', 'decided', '2026-01-27T10:00:00Z');
